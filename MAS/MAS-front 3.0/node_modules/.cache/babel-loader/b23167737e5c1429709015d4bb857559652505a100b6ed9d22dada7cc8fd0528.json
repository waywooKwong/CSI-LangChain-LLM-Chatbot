{"ast":null,"code":"import _regeneratorRuntime from \"E:/CSI/MAS/MAS-front 3.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"E:/CSI/MAS/MAS-front 3.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport Message from '@/components/Message.vue';\nimport apiClient from '@/axios';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nexport default {\n  components: {\n    Message: Message\n  },\n  data: function data() {\n    return {\n      query: '',\n      // 用户输入的消息\n      messages: [],\n      // 消息列表\n      isSending: false,\n      // 是否正在发送消息或上传文件\n      files: [],\n      // 待上传的文件列表\n      chatHistory: [],\n      // 聊天历史记录\n      drawerVisible: false,\n      // 抽屉是否可见\n      client: null // WebSocket 客户端实例\n    };\n  },\n  mounted: function mounted() {\n    this.loadMessages(); // 加载当前聊天记录\n    this.loadHistory(); // 加载聊天历史记录\n    this.initWebSocket(); // 初始化 WebSocket 连接\n  },\n  methods: {\n    initWebSocket: function initWebSocket() {\n      var _this = this;\n      this.client = new WebSocket('ws://localhost:8000/ws/run_workflow');\n      this.client.onopen = function () {\n        console.log('WebSocket Client Connected');\n      };\n      this.client.onmessage = function (message) {\n        _this.messages.push({\n          text: message.data,\n          sender: 'bot'\n        });\n        _this.saveMessages();\n        _this.scrollToBottom();\n      };\n      this.client.onclose = function () {\n        console.log('WebSocket Client Closed');\n      };\n      this.client.onerror = function (error) {\n        console.error('WebSocket Client Error', error);\n      };\n    },\n    wstest: function wstest() {\n      if (this.query.trim() === '') return;\n\n      // 添加用户消息到消息列表\n      this.messages.push({\n        text: this.query,\n        sender: 'user'\n      });\n      this.scrollToBottom();\n      this.isSending = true;\n      try {\n        // 通过 WebSocket 发送消息到服务器\n        this.client.send(this.query);\n      } catch (error) {\n        console.error(error);\n        this.messages.push({\n          text: '请求失败，请稍后再试。',\n          sender: 'bot'\n        });\n      } finally {\n        // 清空输入框并重置发送状态\n        this.saveMessages();\n        this.query = '';\n        this.isSending = false;\n        this.scrollToBottom();\n      }\n    },\n    handleIncomingMessage: function handleIncomingMessage(message) {\n      // 将接收到的消息添加到消息列表中\n      this.messages.push({\n        text: message,\n        sender: 'backend'\n      });\n      this.saveMessages();\n      this.scrollToBottom();\n    },\n    toggleDrawer: function toggleDrawer() {\n      this.drawerVisible = !this.drawerVisible;\n    },\n    handleFileUpload: function handleFileUpload(file) {\n      this.files.push(file);\n      return false; // 阻止默认上传行为\n    },\n    removeFile: function removeFile(index) {\n      this.files.splice(index, 1);\n    },\n    sendQuery: function sendQuery() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(_this2.query.trim() === '')) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _this2.messages.push({\n                text: _this2.query,\n                sender: 'user'\n              });\n              _this2.scrollToBottom();\n              _this2.isSending = true;\n              _context.prev = 5;\n              _context.next = 8;\n              return apiClient.post('/ask', {\n                query: _this2.query\n              });\n            case 8:\n              res = _context.sent;\n              _this2.messages.push({\n                text: res.data.response,\n                sender: 'bot'\n              });\n              _context.next = 16;\n              break;\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](5);\n              console.error(_context.t0);\n              _this2.messages.push({\n                text: '请求失败，请稍后再试。',\n                sender: 'bot'\n              });\n            case 16:\n              _context.prev = 16;\n              _this2.saveMessages();\n              _this2.query = '';\n              _this2.isSending = false;\n              _this2.scrollToBottom();\n              return _context.finish(16);\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[5, 12, 16, 22]]);\n      }))();\n    },\n    MASquery: function MASquery() {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(_this3.query.trim() === '')) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              _this3.messages.push({\n                text: _this3.query,\n                sender: 'user'\n              });\n              _this3.scrollToBottom();\n              _this3.isSending = true;\n              try {\n                // 通过 WebSocket 发送消息到服务器\n                _this3.client.send(JSON.stringify({\n                  type: 'query',\n                  content: _this3.query\n                }));\n              } catch (error) {\n                console.error(error);\n                _this3.messages.push({\n                  text: '请求失败，请稍后再试。',\n                  sender: 'bot'\n                });\n              } finally {\n                _this3.saveMessages();\n                _this3.query = '';\n                _this3.isSending = false;\n                _this3.scrollToBottom();\n              }\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    uploadFiles: function uploadFiles() {\n      var _this4 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var formData, i;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(_this4.files.length === 0)) {\n                _context3.next = 3;\n                break;\n              }\n              alert('请选择要上传的文件');\n              return _context3.abrupt(\"return\");\n            case 3:\n              _this4.isSending = true;\n              formData = new FormData();\n              for (i = 0; i < _this4.files.length; i++) {\n                formData.append('file', _this4.files[i]);\n              }\n              _context3.prev = 6;\n              _context3.next = 9;\n              return apiClient.post('/upload', formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n            case 9:\n              _this4.messages.push({\n                text: '文件上传成功',\n                sender: 'bot'\n              });\n              _this4.files = [];\n              _context3.next = 17;\n              break;\n            case 13:\n              _context3.prev = 13;\n              _context3.t0 = _context3[\"catch\"](6);\n              console.error(_context3.t0);\n              _this4.messages.push({\n                text: \"\\u6587\\u4EF6\\u4E0A\\u4F20\\u5931\\u8D25\\uFF0C\\u8BF7\\u7A0D\\u540E\\u518D\\u8BD5\\u3002\\u9519\\u8BEF\\u4FE1\\u606F: \".concat(_context3.t0.response ? _context3.t0.response.data : _context3.t0.message),\n                sender: 'bot'\n              });\n            case 17:\n              _context3.prev = 17;\n              _this4.isSending = false;\n              _this4.scrollToBottom();\n              return _context3.finish(17);\n            case 21:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[6, 13, 17, 21]]);\n      }))();\n    },\n    saveMessages: function saveMessages() {\n      localStorage.setItem('chatMessages', JSON.stringify(this.messages));\n    },\n    loadMessages: function loadMessages() {\n      var savedMessages = localStorage.getItem('chatMessages');\n      if (savedMessages) {\n        this.messages = JSON.parse(savedMessages);\n      }\n    },\n    saveHistory: function saveHistory() {\n      this.chatHistory.push({\n        summary: this.messages.map(function (msg) {\n          return msg.text;\n        }).join(' | '),\n        messages: this.messages\n      });\n      localStorage.setItem('chatHistory', JSON.stringify(this.chatHistory));\n    },\n    loadHistory: function loadHistory() {\n      var savedHistory = localStorage.getItem('chatHistory');\n      if (savedHistory) {\n        this.chatHistory = JSON.parse(savedHistory);\n      }\n    },\n    clearHistory: function clearHistory() {\n      this.chatHistory = [];\n      localStorage.removeItem('chatHistory');\n    },\n    createNewChat: function createNewChat() {\n      this.messages = [];\n      this.saveMessages();\n    },\n    continueChat: function continueChat(history) {\n      this.messages = history.messages;\n      this.saveMessages();\n    },\n    scrollToBottom: function scrollToBottom() {\n      var _this5 = this;\n      this.$nextTick(function () {\n        var chatWindow = _this5.$refs.chatWindow;\n        chatWindow.scrollTop = chatWindow.scrollHeight;\n      });\n    },\n    goToAgentMap: function goToAgentMap() {\n      this.$router.push({\n        name: 'AgentMap'\n      });\n    },\n    goToGithub: function goToGithub() {\n      window.open('https://github.com/waywooKwong/CSI-LangChain-LLM-Chatbot', '_blank');\n    }\n  }\n};","map":{"version":3,"names":["Message","apiClient","w3cwebsocket","W3CWebSocket","components","data","query","messages","isSending","files","chatHistory","drawerVisible","client","mounted","loadMessages","loadHistory","initWebSocket","methods","_this","WebSocket","onopen","console","log","onmessage","message","push","text","sender","saveMessages","scrollToBottom","onclose","onerror","error","wstest","trim","send","handleIncomingMessage","toggleDrawer","handleFileUpload","file","removeFile","index","splice","sendQuery","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","abrupt","post","sent","response","t0","finish","stop","MASquery","_this3","_callee2","_callee2$","_context2","JSON","stringify","type","content","uploadFiles","_this4","_callee3","formData","i","_callee3$","_context3","length","alert","FormData","append","headers","concat","localStorage","setItem","savedMessages","getItem","parse","saveHistory","summary","map","msg","join","savedHistory","clearHistory","removeItem","createNewChat","continueChat","history","_this5","$nextTick","chatWindow","$refs","scrollTop","scrollHeight","goToAgentMap","$router","name","goToGithub","window","open"],"sources":["src/views/ChatView.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-main\">\r\n    <!-- 侧边栏 -->\r\n    <div class=\"side-bar\">\r\n      <div class=\"toggle-bar\">\r\n        <!-- 图标，点击后跳转到AgentMap页面 -->\r\n        <div @click=\"goToAgentMap()\" class=\"icon go-to-agent\" data-tooltip=\"Go to AgentMap\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"main-content\">\r\n      <!-- 聊天窗口头部 -->\r\n      <div class=\"chat-header\">\r\n        <h2>智能对话客服</h2>\r\n        <!-- 打开抽屉按钮 -->\r\n        <el-tooltip effect=\"dark\" content=\"打开历史记录\" placement=\"bottom\">\r\n          <el-button :disabled=\"isSending\" class=\"drawer-button\" type=\"text\" @click=\"toggleDrawer\">\r\n            历史记录\r\n          </el-button>\r\n        </el-tooltip>\r\n        <!-- \"关于\"按钮，点击后跳转到GitHub -->\r\n        <el-tooltip effect=\"dark\" content=\"跳转到 GitHub 页面\" placement=\"bottom\">\r\n          <el-button :disabled=\"isSending\" class=\"about-button\" type=\"text\" @click=\"goToGithub\">\r\n            Github\r\n          </el-button>\r\n        </el-tooltip>\r\n      </div>\r\n\r\n      <div class=\"main-window\">\r\n        <!-- 聊天窗口 -->\r\n        <div class=\"chat-window\" ref=\"chatWindow\">\r\n          <!-- 遍历并渲染每条消息 -->\r\n          <Message v-for=\"(message, index) in messages\" :key=\"index\" :text=\"message.text\" :sender=\"message.sender\" />\r\n        </div>\r\n      </div>\r\n\r\n      <el-footer class=\"footer\">\r\n        <!-- 文件上传组件 -->\r\n        <el-upload class=\"upload-demo\" ref=\"upload\" action=\"\" :file-list=\"fileList\" :show-file-list=\"false\"\r\n          :before-upload=\"handleFileUpload\" :disabled=\"isSending\" multiple>\r\n          <!-- 自定义上传按钮 -->\r\n          <template v-slot:trigger>\r\n            <el-tooltip effect=\"dark\" content=\"选择文件\" placement=\"top\">\r\n              <el-button :disabled=\"isSending\">\r\n                <i class=\"el-icon-paperclip\" size: small></i>\r\n              </el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-upload>\r\n        <!-- 文件列表 -->\r\n        <ul class=\"file-list\">\r\n          <li v-for=\"(file, index) in files\" :key=\"index\">\r\n            {{ file.name }}\r\n            <el-button type=\"text\" @click=\"removeFile(index)\">删除</el-button>\r\n          </li>\r\n        </ul>\r\n        <!-- 消息输入框 -->\r\n        <el-input v-model=\"query\" placeholder=\"Type a message\" @keyup.enter=\"sendQuery\"\r\n          :disabled=\"isSending\"></el-input>\r\n        <!-- 发送按钮 -->\r\n        <el-button type=\"primary\" @click=\"sendQuery\" :disabled=\"isSending\">发送</el-button>\r\n        <!-- 上传文件按钮 -->\r\n        <el-button type=\"success\" @click=\"uploadFiles\" :disabled=\"isSending || files.length === 0\">上传文件</el-button>\r\n        <el-button type=\"test\" @click=\"MASquery\" :disabled=\"isSending\">MAS 发送</el-button>\r\n        <el-button type=\"primary\" @click=\"wstest\" :disabled=\"isSending\">发送 WebSocket 消息</el-button>\r\n\r\n      </el-footer>\r\n    </div>\r\n\r\n    <!-- 抽屉组件 -->\r\n    <el-drawer\r\n      title=\"历史记录\"\r\n      :visible.sync=\"drawerVisible\"\r\n      direction=\"ltr\"\r\n      size=\"20%\">\r\n      <div class=\"history-contain\">\r\n        <div class=\"history-header\">\r\n          <!-- 新建聊天按钮 -->\r\n          <button class=\"new-chat-button\" @click=\"createNewChat\">新建对话</button>\r\n          <!-- 手动保存历史记录按钮 -->\r\n          <button :disabled=\"messages.length === 0\" class=\"save-history-button\" @click=\"saveHistory\">保存对话</button>\r\n          <!-- 清除历史记录按钮 -->\r\n          <button class=\"clear-history-button\" @click=\"clearHistory\">清除记录</button>\r\n        </div>\r\n        <!-- 历史聊天记录 -->\r\n        <div class=\"chat-history\">\r\n          <div v-for=\"(history, index) in chatHistory\" :key=\"index\" class=\"chat-history-message\"\r\n            @click=\"continueChat(history)\">\r\n            <span>{{ history.summary }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Message from '@/components/Message.vue';\r\nimport apiClient from '@/axios';\r\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\r\n\r\nexport default {\r\n  components: {\r\n    Message,\r\n  },\r\n  data() {\r\n    return {\r\n      query: '', // 用户输入的消息\r\n      messages: [], // 消息列表\r\n      isSending: false, // 是否正在发送消息或上传文件\r\n      files: [], // 待上传的文件列表\r\n      chatHistory: [], // 聊天历史记录\r\n      drawerVisible: false, // 抽屉是否可见\r\n      client: null // WebSocket 客户端实例\r\n    };\r\n  },\r\n  mounted() {\r\n    this.loadMessages(); // 加载当前聊天记录\r\n    this.loadHistory(); // 加载聊天历史记录\r\n    this.initWebSocket(); // 初始化 WebSocket 连接\r\n  },\r\n  methods: {\r\n    initWebSocket() {\r\n    this.client = new WebSocket('ws://localhost:8000/ws/run_workflow');\r\n    \r\n    this.client.onopen = () => {\r\n      console.log('WebSocket Client Connected');\r\n    };\r\n\r\n    this.client.onmessage = (message) => {\r\n      this.messages.push({ text: message.data, sender: 'bot' });\r\n      this.saveMessages();\r\n      this.scrollToBottom();\r\n    };\r\n\r\n    this.client.onclose = () => {\r\n      console.log('WebSocket Client Closed');\r\n    };\r\n\r\n    this.client.onerror = (error) => {\r\n      console.error('WebSocket Client Error', error);\r\n    };\r\n  },\r\n\r\n  wstest() {\r\n    if (this.query.trim() === '') return;\r\n\r\n    // 添加用户消息到消息列表\r\n    this.messages.push({ text: this.query, sender: 'user' });\r\n    this.scrollToBottom();\r\n\r\n    this.isSending = true;\r\n\r\n    try {\r\n      // 通过 WebSocket 发送消息到服务器\r\n      this.client.send(this.query);\r\n    } catch (error) {\r\n      console.error(error);\r\n      this.messages.push({ text: '请求失败，请稍后再试。', sender: 'bot' });\r\n    } finally {\r\n      // 清空输入框并重置发送状态\r\n      this.saveMessages();\r\n      this.query = '';\r\n      this.isSending = false;\r\n      this.scrollToBottom();\r\n    }\r\n  },\r\n    handleIncomingMessage(message) {\r\n      // 将接收到的消息添加到消息列表中\r\n      this.messages.push({ text: message, sender: 'backend' });\r\n      this.saveMessages();\r\n      this.scrollToBottom();\r\n    },\r\n    toggleDrawer() {\r\n      this.drawerVisible = !this.drawerVisible;\r\n    },\r\n    handleFileUpload(file) {\r\n      this.files.push(file);\r\n      return false; // 阻止默认上传行为\r\n    },\r\n    removeFile(index) {\r\n      this.files.splice(index, 1);\r\n    },\r\n    async sendQuery() {\r\n      if (this.query.trim() === '') return;\r\n\r\n      this.messages.push({ text: this.query, sender: 'user' });\r\n      this.scrollToBottom();\r\n\r\n      this.isSending = true;\r\n\r\n      try {\r\n        const res = await apiClient.post('/ask', {\r\n          query: this.query,\r\n        });\r\n        this.messages.push({ text: res.data.response, sender: 'bot' });\r\n        \r\n      } catch (error) {\r\n        console.error(error);\r\n        this.messages.push({ text: '请求失败，请稍后再试。', sender: 'bot' });\r\n      } finally {\r\n        this.saveMessages();\r\n        this.query = '';\r\n        this.isSending = false;\r\n        this.scrollToBottom();\r\n      }\r\n    },\r\n    async MASquery() {\r\n      if (this.query.trim() === '') return;\r\n\r\n      this.messages.push({ text: this.query, sender: 'user' });\r\n      this.scrollToBottom();\r\n\r\n      this.isSending = true;\r\n\r\n      try {\r\n        // 通过 WebSocket 发送消息到服务器\r\n        this.client.send(JSON.stringify({\r\n          type: 'query',\r\n          content: this.query,\r\n        }));\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.messages.push({ text: '请求失败，请稍后再试。', sender: 'bot' });\r\n      } finally {\r\n        this.saveMessages();\r\n        this.query = '';\r\n        this.isSending = false;\r\n        this.scrollToBottom();\r\n      }\r\n    },\r\n    async uploadFiles() {\r\n      if (this.files.length === 0) {\r\n        alert('请选择要上传的文件');\r\n        return;\r\n      }\r\n\r\n      this.isSending = true;\r\n\r\n      const formData = new FormData();\r\n      for (let i = 0; i < this.files.length; i++) {\r\n        formData.append('file', this.files[i]);\r\n      }\r\n\r\n      try {\r\n        await apiClient.post('/upload', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        });\r\n        this.messages.push({ text: '文件上传成功', sender: 'bot' });\r\n        this.files = [];\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.messages.push({\r\n          text: `文件上传失败，请稍后再试。错误信息: ${error.response ? error.response.data : error.message}`,\r\n          sender: 'bot'\r\n        });\r\n      } finally {\r\n        this.isSending = false;\r\n        this.scrollToBottom();\r\n      }\r\n    },\r\n    saveMessages() {\r\n      localStorage.setItem('chatMessages', JSON.stringify(this.messages));\r\n    },\r\n    loadMessages() {\r\n      const savedMessages = localStorage.getItem('chatMessages');\r\n      if (savedMessages) {\r\n        this.messages = JSON.parse(savedMessages);\r\n      }\r\n    },\r\n    saveHistory() {\r\n      this.chatHistory.push({ summary: this.messages.map(msg => msg.text).join(' | '), messages: this.messages });\r\n      localStorage.setItem('chatHistory', JSON.stringify(this.chatHistory));\r\n    },\r\n    loadHistory() {\r\n      const savedHistory = localStorage.getItem('chatHistory');\r\n      if (savedHistory) {\r\n        this.chatHistory = JSON.parse(savedHistory);\r\n      }\r\n    },\r\n    clearHistory() {\r\n      this.chatHistory = [];\r\n      localStorage.removeItem('chatHistory');\r\n    },\r\n    createNewChat() {\r\n      this.messages = [];\r\n      this.saveMessages();\r\n    },\r\n    continueChat(history) {\r\n      this.messages = history.messages;\r\n      this.saveMessages();\r\n    },\r\n    scrollToBottom() {\r\n      this.$nextTick(() => {\r\n        const chatWindow = this.$refs.chatWindow;\r\n        chatWindow.scrollTop = chatWindow.scrollHeight;\r\n      });\r\n    },\r\n    goToAgentMap() {\r\n      this.$router.push({ name: 'AgentMap' });\r\n    },\r\n    goToGithub() {\r\n      window.open('https://github.com/waywooKwong/CSI-LangChain-LLM-Chatbot', '_blank');\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/fonts/index\";\r\n\r\n.chat-main {\r\n  display: flex;\r\n  height: 100%;\r\n}\r\n\r\n.main-content {\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-header {\r\n  height: 60px;\r\n  padding: 0 10px;\r\n  background-color: rgb(126,18,110);\r\n  border-bottom: 1px solid #f4f4f4;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  color: white;\r\n\r\n  h2 {\r\n    margin: 0;\r\n    flex: 1;\r\n    text-align: center;\r\n  }\r\n\r\n  .drawer-button {\r\n    position: absolute;\r\n    left: 10px;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    width: auto; /* 自动宽度适应文字 */\r\n    height: 30px; /* 自动高度适应文字 */\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: white; /* 修改背景颜色为白色 */\r\n    padding: 0;\r\n  }\r\n\r\n  .about-button {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    width: auto; /* 自动宽度适应文字 */\r\n    height: 30px; /* 自动高度适应文字 */\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: white; /* 修改背景颜色为白色 */\r\n    padding: 0;\r\n  }\r\n}\r\n\r\n.main-window {\r\n  display: flex;\r\n  flex: 1;\r\n  overflow: hidden; /* 避免整个窗口的滚动条 */\r\n}\r\n\r\n.chat-window {\r\n  flex: 1;\r\n  overflow-y: auto; /* 仅对话信息框可以滚动 */\r\n  padding: 10px;\r\n  border-bottom: 1px solid #dcdfe6;\r\n}\r\n\r\n.footer {\r\n  display: flex;\r\n  padding: 10px;\r\n  background-color: #fff;\r\n  align-items: center; /* 底部水平对齐 */\r\n}\r\n\r\n.footer .el-input {\r\n  flex: 1;\r\n  margin-right: 10px;\r\n}\r\n\r\n.upload-demo {\r\n  margin-right: 10px;\r\n}\r\n\r\n.file-list {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0 10px 10px 0;\r\n}\r\n\r\n.file-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #f9f9f9;\r\n  padding: 5px;\r\n  border-radius: 3px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.side-bar {\r\n  height: 100%;\r\n  max-width: 250px;\r\n  z-index: 2;\r\n  background: none;\r\n  display: flex;\r\n\r\n  .toggle-bar {\r\n    height: 100%;\r\n    width: 50px;\r\n    background: #222222;\r\n    z-index: 2;\r\n    display: flex;\r\n    flex-flow: column;\r\n    align-items: center;\r\n    padding: 13px;\r\n\r\n    .icon {\r\n      margin-bottom: 26px;\r\n      font-size: 24px;\r\n      color: #FFFFFF;\r\n      cursor: pointer;\r\n      position: relative;\r\n\r\n      &:before {\r\n        @include icon;\r\n      }\r\n\r\n      /* Tooltip styling */\r\n      &::after {\r\n        content: attr(data-tooltip);\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 100%;\r\n        transform: translateY(-50%) translateX(10px); /* 右侧显示并略微偏移 */\r\n        background: #333;\r\n        color: #fff;\r\n        padding: 5px 10px;\r\n        border-radius: 4px;\r\n        white-space: nowrap;\r\n        font-size: 12px; /* 缩小字体 */\r\n        opacity: 0;\r\n        visibility: hidden;\r\n        transition: opacity 0.3s, visibility 0.3s;\r\n        z-index: 10;\r\n      }\r\n\r\n      &:hover::after {\r\n        opacity: 1;\r\n        visibility: visible;\r\n      }\r\n    }\r\n\r\n    .go-to-agent {\r\n      &:before {\r\n        content: '\\E8AF'; /* 请确保这个内容与您的字体图标设置相匹配 */\r\n      }\r\n    }\r\n\r\n    .disabled-icon {\r\n      opacity: 0.35;\r\n    }\r\n  }\r\n}\r\n\r\n.history-contain {\r\n  padding: 10px; /* 增加内边距 */\r\n  h3 {\r\n    text-align: center;\r\n    margin-bottom: 10px; /* 增加下边距 */\r\n    color: #333;\r\n  }\r\n\r\n  .history-header {\r\n    display: flex;\r\n    flex-direction: column; /* 垂直排列按钮 */\r\n    align-items: center; /* 居中对齐 */\r\n    margin-bottom: 10px; /* 增加下边距 */\r\n\r\n    button {\r\n      margin: 5px 0; /* 增加上下间距 */\r\n      padding: 5px 10px; /* 增加内边距 */\r\n      width: 100%; /* 按钮宽度为100% */\r\n      box-sizing: border-box; /* 包括内边距和边框在内的宽度和高度 */\r\n    }\r\n  }\r\n\r\n  .chat-history {\r\n    display: flex;\r\n    flex-direction: column; /* 垂直排列历史记录 */\r\n    gap: 5px; /* 增加历史记录之间的间距 */\r\n  }\r\n\r\n  .chat-history-message {\r\n    background-color: #fff;\r\n    padding: 5px;\r\n    border-radius: 5px; /* 圆角边框 */\r\n    cursor: pointer;\r\n    transition: background-color 0.3s;\r\n\r\n    &:hover {\r\n      background-color: #f5f5f5;\r\n    }\r\n  }\r\n}\r\n\r\n.el-drawer__wrapper {\r\n  .el-drawer__container {\r\n    margin-left: 50px; /* 从侧边栏展开 */\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}